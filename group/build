####TARGET####

# Build Map Manager
cd mapmanager
make
cd ..

# Build Device Simulator(s)
cd devicesimulator
make
cd ..

# Build Command Line Simulator access
cc ../mapmanager/mapmanageruser.c -o../build/persi -I../include

####EXPORTS####
# Move binaries to build folder
# Map Manager
mv -f ../mapmanager/mapmanager.ko ../build
mv -f ../mapmanager/mapmanager.mod.c ../build
mv -f ../mapmanager/mapmanager.mod.o ../build
mv -f ../mapmanager/mapmanager.o ../build
#mv -f mapmanager/modules.order ../build
#mv -f mapmanager/Module.symvers ../build

# Device Simulator
mv -f ../devicesimulator/examplesimulator.ko ../build
mv -f ../devicesimulator/examplesimulator.mod.c ../build
mv -f ../devicesimulator/examplesimulator.mod.o ../build
mv -f ../devicesimulator/examplesimulator.o ../build
#mv -f devicesimulator/modules.order ../build
#mv -f devicesimulator/Module.symvers ../build

# Copy scripts to build folder
cp -f ../scripts/persi_load ../build
cp -f ../scripts/persi_unload ../build
